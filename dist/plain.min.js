/**
 * This file is created by xingzheFE.
 * https://github.com/XingzheFE/
 * Tue Mar 19 2019 22:45:52 GMT+0800 (CST)
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.Plain=n()}(this,function(){"use strict";function n(t,n,o,e){var i,r=arguments.length,a=r<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,o):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,o,e);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(r<3?i(a):3<r?i(n,o,a):i(n,o))||a);return 3<r&&a&&Object.defineProperty(n,o,a),a}var e={DEBUG:!0,name:"plain",coordType:"DEFAULT",setCoordType:function(t){this.coordType=t}},i=function(t){this.eventName=t.eventName,this.host=t.host,this.handler=t.handler,this.listener=t.listener},o={color:"#3388ff",weight:3,opacity:.8},s=52.35987755982988,p=3.141592653589793,c=6378245,u=.006693421622965943,l=function(t,n){var o=2*(n=+n)-100+3*(t=+t)+.2*t*t+.1*n*t+.2*Math.sqrt(Math.abs(n));return o+=2*(20*Math.sin(6*n*p)+20*Math.sin(2*n*p))/3,o+=2*(20*Math.sin(t*p)+40*Math.sin(t/3*p))/3,o+=2*(160*Math.sin(t/12*p)+320*Math.sin(t*p/30))/3},h=function(t,n){var o=300+(n=+n)+2*(t=+t)+.1*n*n+.1*n*t+.1*Math.sqrt(Math.abs(n));return o+=2*(20*Math.sin(6*n*p)+20*Math.sin(2*n*p))/3,o+=2*(20*Math.sin(n*p)+40*Math.sin(n/3*p))/3,o+=2*(150*Math.sin(n/12*p)+300*Math.sin(n/30*p))/3},g=function(t,n){t=+t;return!(73.66<(n=+n)&&n<135.05&&3.86<t&&t<53.55)},r={bd09togcj02:function(t,n){var o=(n=+n)-.0065,e=(t=+t)-.006,i=Math.sqrt(o*o+e*e)-2e-5*Math.sin(e*s),r=Math.atan2(e,o)-3e-6*Math.cos(o*s),a=i*Math.cos(r);return[i*Math.sin(r),a]},gcj02tobd09:function(t,n){t=+t,n=+n;var o=Math.sqrt(n*n+t*t)+2e-5*Math.sin(t*s),e=Math.atan2(t,n)+3e-6*Math.cos(n*s),i=o*Math.cos(e)+.0065;return[o*Math.sin(e)+.006,i]},wgs84togcj02:function(t,n){if(g(t=+t,n=+n))return[t,n];var o=l(t-35,n-105),e=h(t-35,n-105),i=t/180*p,r=Math.sin(i);r=1-u*r*r;var a=Math.sqrt(r);return[t+(o=180*o/(c*(1-u)/(r*a)*p)),n+(e=180*e/(c/a*Math.cos(i)*p))]},gcj02towgs84:function(t,n){if(g(t=+t,n=+n))return[t,n];var o=l(t-35,n-105),e=h(t-35,n-105),i=t/180*p,r=Math.sin(i);r=1-u*r*r;var a=Math.sqrt(r);return[2*t-(t+(o=180*o/(c*(1-u)/(r*a)*p))),2*n-(n+(e=180*e/(c/a*Math.cos(i)*p)))]}};function a(t){var n=t[0][0],o=t[0][1],e=n,i=o;return t.map(function(t){t[0]<n?n=t[0]:t[0]>e&&(e=t[0]),t[1]<o?o=t[1]:t[1]>i&&(i=t[1])}),[[n,o],[e,i]]}function f(t,n){if(Object.assign)Object.assign(t,n);else for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);return t}function y(t){return t[0]instanceof Array?t.map(function(t){return r.gcj02tobd09(t[0],t[1])}):r.gcj02tobd09(t[0],t[1])}function d(t){return t[0]instanceof Array?t.map(function(t){return r.bd09togcj02(t[0],t[1])}):r.bd09togcj02(t[0],t[1])}function _(t){if(!(t[0]instanceof Array)){var n=r.wgs84togcj02(t[0],t[1]);return r.gcj02tobd09(n[0],n[1])}return t.map(function(t){return r.wgs84togcj02(t[0],t[1])}).map(function(t){return r.gcj02tobd09(t[0],t[1])})}function m(t){if(!(t[0]instanceof Array)){var n=r.bd09togcj02(t[0],t[1]);return r.gcj02towgs84(n[0],n[1])}return t.map(function(t){return r.bd09togcj02(t[0],t[1])}).map(function(t){return r.gcj02towgs84(t[0],t[1])})}function b(n,t){void 0===t&&(t=["click","dblclick"]),t.map(function(t){n.addEventListener(t,function(t){t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation()})})}function v(o,t){t.split(";").map(function(t){var n=t.split(":");o.style[M(n[0])]=M(n[1])})}function M(t){return void 0===t&&(t=""),t.replace(/^\s+|\s+$/g,"")}function L(t){return"object"==typeof t?JSON.parse(JSON.stringify(t)):t}var w=Object.freeze({log:function(t){t instanceof Error?console.error(t):e.DEBUG&&console.log("["+e.name+"] ",t)},getBound:a,objectAssign:f,g2b:y,b2g:d,w2g:function(t){return t[0]instanceof Array?t.map(function(t){return r.wgs84togcj02(t[0],t[1])}):r.wgs84togcj02(t[0],t[1])},g2w:function(t){return t[0]instanceof Array?t.map(function(t){return r.gcj02towgs84(t[0],t[1])}):r.gcj02towgs84(t[0],t[1])},w2b:_,b2w:m,locate:function(n,o){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){n&&n(t.coords.latitude,t.coords.longitude)},function(t){o&&o(t)}):o&&o(new Error("Geolocation is not supported by your browser"))},stopPropagation:b,setStyle:v,trim:M,clone:L}),x=function(){function t(t){this.MAP_TYPE={HYBRID:"HYBRID",NORMAL:"NORMAL",SATELLITE:"SATELLITE"},this._type={map:"AMAP",type:this.MAP_TYPE.NORMAL},this._original=new AMap.Map(t.container,{zoom:t.zoom,center:t.center.slice().reverse()})}return t.prototype.addLayer=function(t){if(t)if(t instanceof Array)for(var n=0;n<t.length;n++)t[n]._original.setMap(this._original);else t._original.setMap(this._original)},t.prototype.removeLayer=function(t){if(t instanceof Array)for(var n=0;n<t.length;n++)t[n]._original.setMap(null);else t._original.setMap(null)},t.prototype.clearLayers=function(){this._original.clearMap()},t.prototype.setZoom=function(t){this._original.setZoom(t)},t.prototype.getZoom=function(){return this._original.getZoom()},t.prototype.zoomIn=function(){this._original.zoomIn()},t.prototype.zoomOut=function(){this._original.zoomOut()},t.prototype.fitView=function(t,n){var e=this,o=a(t);this._boundMarkers?o.map(function(t,n,o){e._boundMarkers[n].setPosition([t[1],t[0]])}):(this._boundIcon=new AMap.Icon({size:new AMap.Size(0,0)}),this._boundMarkers=o.map(function(t){return new AMap.Marker({map:e._original,icon:e._boundIcon,position:[t[1],t[0]]})})),this._original.setFitView(this._boundMarkers),this._original.remove(this._boundMarkers)},t.prototype.setCenter=function(t){this._original.setCenter(new AMap.LngLat(t[1],t[0]))},t.prototype.getCenter=function(){var t=this._original.getCenter();return[t.lat,t.lng]},t.prototype.panTo=function(t){this._original.panTo(t.slice().reverse())},t.prototype.setMapType=function(t){var n=this.MAP_TYPE;switch(t){case n.HYBRID:this._type.type=n.HYBRID,this._original.setLayers([new AMap.TileLayer.Satellite,new AMap.TileLayer.RoadNet]);break;case n.NORMAL:this._type.type=n.NORMAL,this._original.setLayers([new AMap.TileLayer]);break;case n.SATELLITE:this._type.type=n.SATELLITE,this._original.setLayers([new AMap.TileLayer.Satellite]);break;case n.TERRAIN:}return this},t=n([C],t)}(),A=function(){function t(t){this._opt=t,this._original=new AMap.Marker({bubble:!1,clickable:!1,position:[0,0],content:"custom Layer",offset:new AMap.Pixel(0,0)})}return t.prototype.setLatLng=function(t){return this._original&&this._original.setPosition(t.slice().reverse()),this},t.prototype.setContent=function(t){return void 0===t&&(t=""),this._original.setContent(t),this},t.prototype.mount=function(t){return this._original.setMap(t._original),this},t.prototype.unmount=function(){return this._original.setMap(null),this},t.prototype.show=function(){return this._original.show(),this},t.prototype.hide=function(){return this._original.hide(),this},t.prototype.remove=function(){this._box=null,this._contentBox=null,this._original=null},t}(),O=function(e){function t(t){var n=this;if(e.call(this,t),this._box=document.createElement("div"),this._box.classList.add("popup-box"),this._box.setAttribute("data-plain-style",""),this._box.setAttribute("style",this.getStyle(t)),this._contentBox=document.createElement("div"),this._box.innerHTML='<div class="popup-arrow"></div',this._contentBox.classList.add("popup-content"),this._box.appendChild(this._contentBox),b(this._box,["mouseup","mousedown"]),this._original=new AMap.Marker({bubble:!1,position:[0,0],content:this._box,zIndex:t&&t.zIndex?t.zIndex:999}),t&&!0===t.closeBtn){var o=document.createElement("button");o.setAttribute("type","button"),o.classList.add("popup-close"),o.innerHTML="Ã—",o.addEventListener("click",function(t){n.hide()}),this._box.appendChild(o)}}return function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);function e(){this.constructor=t}t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(t,e),t.prototype.getStyle=function(t){void 0===t&&(t={});var n="position: absolute;left: 10px;";return t.zIndex&&"number"==typeof t.zIndex&&(n+="z-index:"+t.zIndex+";"),t.offset&&t.offset instanceof Array&&2===t.offset.length&&(n+="margin: "+(t.offset[0]+30)+"px "+t.offset[1]+"px;"),n},t.prototype.createContent=function(t){"string"==typeof t?this._contentBox.innerHTML=t:(this._contentBox.innerHTML="",this._contentBox.appendChild(t))},t.prototype.setContent=function(t){return this.createContent(t),this},t}(A),P=function(){function t(t,n){var o=this.formatOpt(n,t);this._original=new AMap.Marker(o)}return t.prototype.formatOpt=function(t,n){void 0===t&&(t={});var o={map:null,position:[n[1],n[0]],icon:t.icon?t.icon._original:null,raiseOnDrag:!t.raiseOnDrag||t.raiseOnDrag,crossOnDrag:!t.crossOnDrag||t.crossOnDrag,draggable:t.draggable};return t.icon&&t.icon.anchor&&(o.offset=new AMap.Pixel(-t.icon.anchor[0],-t.icon.anchor[1])),f(L(t),o)},t.prototype.setLatLng=function(t){return this._original.setPosition(t.slice().reverse()),this},t.prototype.getLatLng=function(){var t=this._original.getPosition();return[t.lat,t.lng]},t.prototype.setIcon=function(t){return t&&t._original&&this._original.setIcon(t._original),this},t.prototype.enableDragging=function(){return this._original&&this._original.setDraggable(!0),this},t.prototype.disableDragging=function(){return this._original&&this._original.setDraggable(!1),this},t.prototype.setLabel=function(t,n){return void 0===t&&(t=""),this._original.setLabel({content:t}),this},t=n([C],t)}(),T=function(){function t(t,n){var o=t.map(function(t){return[t[1],t[0]]}),e=this.formatOpt(n,o);this._original=new AMap.Polyline(e)}return t.prototype.formatOpt=function(t,n){return void 0===t&&(t={}),f(o,t),{path:n,strokeColor:o.color,strokeWeight:o.weight,strokeOpacity:o.opacity}},t.prototype.setPath=function(t){var n=t.map(function(t){return[t[1],t[0]]});return this._original.setPath(n),this},t.prototype.getPath=function(){return(this._original.getPath()||[]).map(function(t){return[t.lat,t.lng]})},t.prototype.setStrokeColor=function(t){return void 0===t&&(t=o.color),this._original&&this._original.setOptions({strokeColor:t}),this},t.prototype.setStrokeWeight=function(t){return void 0===t&&(t=o.weight),this._original&&this._original.setOptions({strokeWeight:t}),this},t.prototype.setStrokeOpacity=function(t){return void 0===t&&(t=o.opacity),this._original&&this._original.setOptions({strokeOpacity:t}),this},t=n([C],t)}(),I=function(){function t(t){var n=this.formatOpt(t);this._original=new AMap.Icon(n),this.anchor=t.anchor}return t.prototype.formatOpt=function(t){void 0===t&&(t={});var n=t.url,o=t.size?new AMap.Size(t.size[0],t.size[1]):null;return{image:n,size:o,imageSize:o}},t.prototype.setImageUrl=function(t){},t.prototype.setSize=function(t){},t.prototype.setAnchor=function(t){},t.prototype.getImageUrl=function(){return""},t.prototype.getAnchor=function(){return[]},t.prototype.getSize=function(){return[]},t}(),k=function(){function t(){this.Util={formatEvent:function(t){var n;return void 0===t&&(t={}),t.lnglat&&(n=[t.lnglat.lat,t.lnglat.lng]),{type:t.type.replace(/^on/g,""),target:this,e:t,p:n,pixel:JSON.parse(JSON.stringify(t.pixel))}}}}return t.prototype.Map=function(t){return new x(t)},t.prototype.Layer=function(t){return new A(t)},t.prototype.Popup=function(t){return new O(t)},t.prototype.Marker=function(t,n){return new P(t,n)},t.prototype.Polyline=function(t,n){return new T(t,n)},t.prototype.Icon=function(t){return new I(t)},t.prototype.load=function(t,n,o){if(window.AMap)n&&n();else{var e="map_init_"+Math.random().toString(16).substr(2),i=document.body,r=document.createElement("SCRIPT"),a="https://webapi.amap.com/maps?v=1.3&key="+t+"&callback="+e;r.setAttribute("src",a),r.setAttribute("defer",""),r.setAttribute("async",""),i.appendChild(r),window[e]=function(){delete window[e],n&&n()}}},t}();function C(t){t.prototype.on=function(t,n){var o=n.bind(this),e=this._original.on(t,o);return new i({eventName:t,host:this,listener:e,handler:o})},t.prototype.off=function(t){this._original.off(t.eventName,t.handler)}}var E=function(){function t(t){var n=t.center?N(t.center):[0,0],o=new BMap.Point(n[1],n[0]);this._original=new BMap.Map(t.container),this._original.centerAndZoom(o,t.zoom||15),this._original.enableScrollWheelZoom(),this.MAP_TYPE={HYBRID:"HYBRID",NORMAL:"NORMAL",SATELLITE:"SATELLITE"},this._type={map:"BMAP",type:this.MAP_TYPE.NORMAL}}return t.prototype.addLayer=function(t){if(t)if(t instanceof Array)for(var n=0;n<t.length;n++)this._original.addOverlay(t[n]._original);else this._original.addOverlay(t._original)},t.prototype.removeLayer=function(t){if(t instanceof Array)for(var n=0;n<t.length;n++)this._original.removeOverlay(t[n]._original);else this._original.removeOverlay(t._original)},t.prototype.clearLayers=function(){this._original.clearOverlays()},t.prototype.setZoom=function(t){this._original.setZoom(t)},t.prototype.getZoom=function(){return this._original.getZoom()},t.prototype.zoomIn=function(){this._original.zoomIn()},t.prototype.zoomOut=function(){this._original.zoomOut()},t.prototype.fitView=function(t,n){var o=N(t).map(function(t){return{lat:t[0],lng:t[1]}});this._original.setViewport(o)},t.prototype.setCenter=function(t){t=N(t),this._original.setCenter(new BMap.Point(t[1],t[0]))},t.prototype.getCenter=function(){var t=this._original.getCenter();return[t.lat,t.lng]},t.prototype.panTo=function(t){this._original.panTo(new BMap.Point(t[1],t[0]))},t.prototype.setMapType=function(t){var n=this.MAP_TYPE;switch(t){case n.HYBRID:this._original.setMapType(BMAP_HYBRID_MAP),this._type.type=n.HYBRID;break;case n.NORMAL:this._original.setMapType(BMAP_NORMAL_MAP),this._type.type=n.NORMAL;break;case n.SATELLITE:this._original.setMapType(BMAP_SATELLITE_MAP),this._type.type=n.SATELLITE;break;case n.TERRAIN:}return this},t=n([R],t)}(),z=function(){function t(t,n){t=N(t);var o=new BMap.Point(t[1],t[0]),e=this.formatOpt(n);this._original=new BMap.Marker(o,e)}return t.prototype.formatOpt=function(t){void 0===t&&(t={});var n={icon:t.icon?t.icon._original:null,raiseOnDrag:!t.raiseOnDrag||t.raiseOnDrag,crossOnDrag:!t.crossOnDrag||t.crossOnDrag,enableDragging:t.draggable};return f(L(t),n)},t.prototype.setLatLng=function(t){t=N(t);var n=new BMap.Point(t[1],t[0]);return this._original.setPosition(n),this},t.prototype.getLatLng=function(){var t=this._original.getPosition();return N([t.lat,t.lng],"output")},t.prototype.setIcon=function(t){return t&&t._original&&this._original.setIcon(t._original),this},t.prototype.enableDragging=function(){return this._original&&this._original.enableDragging(),this},t.prototype.disableDragging=function(){return this._original&&this._original.disableDragging(),this},t.prototype.setLabel=function(t,n){void 0===t&&(t="");var o=this._original.getLabel(),e={border:"none",background:"transparent",zIndex:1};return o?o.setContent(t):(o=new BMap.Label(t),this._original&&this._original.setLabel(o)),o.setStyle(f(e,n)),o.setZIndex(e.zIndex),this},t=n([R],t)}(),S=function(){function t(t,n){var o=N(t).map(function(t){return new BMap.Point(t[1],t[0])});this._original=new BMap.Polyline(o,this.formatOpt(n))}return t.prototype.formatOpt=function(t){return void 0===t&&(t={}),f(o,t),{strokeColor:o.color,strokeWeight:o.weight,strokeOpacity:o.opacity}},t.prototype.setPath=function(t){var n=N(t).map(function(t){return new BMap.Point(t[1],t[0])});return this._original.setPath(n),this},t.prototype.getPath=function(){return N((this._original.getPath()||[]).map(function(t){return[t.lat,t.lng]}),"output")},t.prototype.setStrokeColor=function(t){return void 0===t&&(t=o.color),this._original&&this._original.setStrokeColor(t),this},t.prototype.setStrokeWeight=function(t){return void 0===t&&(t=o.weight),this._original&&this._original.setStrokeWeight(t),this},t.prototype.setStrokeOpacity=function(t){return void 0===t&&(t=o.opacity),this._original&&this._original.setStrokeOpacity(t),this},t=n([R],t)}(),B=function(){function t(t){var n=this.formatOpt(t);this._original=new BMap.Icon(n.url,n.size,n),this._original.setImageSize(n.size)}return t.prototype.formatOpt=function(t){return void 0===t&&(t={}),{anchor:t.anchor?new BMap.Size(t.anchor[0],t.anchor[1]):null,url:t.url,size:t.size?new BMap.Size(t.size[0],t.size[1]):null}},t.prototype.setImageUrl=function(t){},t.prototype.setSize=function(t){},t.prototype.setAnchor=function(t){},t.prototype.getImageUrl=function(){return""},t.prototype.getAnchor=function(){return[]},t.prototype.getSize=function(){return[]},t}(),D=function(){function t(){this.LayerConstructor=H(),this.PopupConstructor=H(!0),this.Util={formatEvent:function(t){var n;return void 0===t&&(t={}),t.point&&(n=N([t.point.lat,t.point.lng],"output")),{type:t.type.replace(/^on/g,""),target:this,e:t,p:n,pixel:JSON.parse(JSON.stringify(t.pixel))}}}}return t.prototype.Map=function(t){return new E(t)},t.prototype.Layer=function(t){return new this.LayerConstructor(t)},t.prototype.Popup=function(t){return new this.PopupConstructor(t)},t.prototype.Marker=function(t,n){return new z(t,n)},t.prototype.Polyline=function(t,n){return new S(t,n)},t.prototype.Icon=function(t){return new B(t)},t.prototype.load=function(t,n,o){if(window.BMap)n&&n();else{var e=this,i="map_init_"+Math.random().toString(16).substr(2),r=document.body,a=document.createElement("SCRIPT"),s="https://api.map.baidu.com/api?v=2.0&ak="+t+"&callback="+i;a.setAttribute("src",s),a.setAttribute("defer",""),a.setAttribute("async",""),r.appendChild(a),window[i]=function(){e.LayerConstructor=H(),e.PopupConstructor=H(!0),delete window[i],n&&n()}}},t}();function R(t){t.prototype.on=function(t,n){var o=n.bind(this),e=this._original.addEventListener(t,o);return new i({eventName:t,host:this,listener:e,handler:o})},t.prototype.off=function(t){this._original.removeEventListener(t.eventName,t.handler)}}function N(t,n){if("output"===n){if("DEFAULT"===e.coordType)return t;switch(e.coordType){case"DEFAULT":return t;case"GCJ02":return d(t);case"BD09":return t;case"WGS84":return m(t)}}else{if("DEFAULT"===e.coordType)return t;switch(e.coordType){case"DEFAULT":return t;case"GCJ02":return y(t);case"BD09":return t;case"WGS84":return _(t)}}}function H(o){void 0===o&&(o=!1);var n=window.BMap;if(n){var t=function(t){this._box=document.createElement("div"),this._box.setAttribute("data-plain-style",""),this._opt=t,this._latlng=this._latlng||new n.Point(0,0),this._content=this._content||'<h1 style="background:#fff;">custom Layer</h1>',this.createContent()};return(t.prototype=new n.Overlay).initialize=function(t){return this._map=t,this.createContent(),t.getPanes().markerPane.appendChild(this._box),this._box},t.prototype.getStyle=function(t){var n=t||this._opt||{},o="";return n.zIndex&&"number"==typeof n.zIndex&&(o+="z-index:"+n.zIndex+";"),n.offset&&n.offset instanceof Array&&2===n.offset.length&&(o+="margin: "+n.offset[0]+"px "+n.offset[1]+"px;"),o},t.prototype.createContent=function(){var n=this;if(this._box.innerHTML="",o){if(b(this._box,["click","dblclick","mousedown"]),this._box.classList.add("popup-box"),this._contentBox=document.createElement("div"),this._box.innerHTML='<div class="popup-arrow"></div>',this._contentBox.classList.add("popup-content"),"string"==typeof this._content?this._contentBox.innerHTML=this._content:this._contentBox.appendChild(this._content),this._box.appendChild(this._contentBox),this._opt&&!0===this._opt.closeBtn){var t=document.createElement("button");t.setAttribute("type","button"),t.classList.add("popup-close"),t.innerHTML="Ã—",t.addEventListener("click",function(t){n.hide()}),this._box.appendChild(t)}}else"string"==typeof this._content?this._box.innerHTML=this._content:this._box.appendChild(this._content)},t.prototype.draw=function(){if(this._map){var t=this._map.pointToOverlayPixel(this._latlng),n="position: absolute; left: "+~~t.x+"px; top: "+~~t.y+"px;";n+=this.getStyle(this._opt),v(this._box,n)}},t.prototype.remove=function(){this._box.parentNode.removeChild(this._box),this._content=null,this._contentBox=null,this._box=null},t.prototype.setContent=function(t){this._content=t;var n=o?this._contentBox:this._box;return t instanceof Element?(n.innerHTML="",n.appendChild(t)):n.innerHTML=t,this},t.prototype.setLatLng=function(t){return void 0===t&&(t=[0,0]),t=N(t),this._latlng=new n.Point(t[1],t[0]),this.draw(),this},t.prototype.mount=function(t){return t._original.addOverlay(this),this},t.prototype.unmount=function(){return this._map.removeOverlay(this),this},t.prototype.show=function(){return this._box&&(this._box.style.display="block"),this},t.prototype.hide=function(){return this._box&&(this._box.style.display="none"),this},t}}var j=function(){function t(t){var n=new google.maps.LatLng(t.center[0],t.center[1]),o="string"==typeof t.container?document.getElementById(t.container):t.container;this._original=new google.maps.Map(o,{zoom:t.zoom,center:n,mapTypeControl:!1,fullscreenControl:!1,scaleControl:!1,streetViewControl:!1,zoomControl:!1}),this.MAP_TYPE={HYBRID:"HYBRID",NORMAL:"NORMAL",TERRAIN:"TERRAIN",SATELLITE:"SATELLITE"},this._type={map:"GMAP",type:this.MAP_TYPE.NORMAL}}return t.prototype.addLayer=function(t){if(t)if(t instanceof Array)for(var n=0;n<t.length;n++)t[n]._original.setMap(this._original);else t._original.setMap(this._original)},t.prototype.removeLayer=function(t){if(t instanceof Array)for(var n=0;n<t.length;n++)t[n]._original.setMap(null);else t._original.setMap(null)},t.prototype.clearLayers=function(){this._original.clearOverlays()},t.prototype.setZoom=function(t){this._original.setZoom(t)},t.prototype.getZoom=function(){return this._original.getZoom()},t.prototype.zoomIn=function(){this.setZoom(this.getZoom()+1)},t.prototype.zoomOut=function(){this.setZoom(this.getZoom()-1)},t.prototype.fitView=function(t,n){var o=a(t).map(function(t){return new google.maps.LatLng(t[0],t[1])}),e=new google.maps.LatLngBounds(o[0],o[1]);this._original.fitBounds(e)},t.prototype.setCenter=function(t){this._original.setCenter({lat:t[0],lng:t[1]})},t.prototype.setMapType=function(t){var n=this.MAP_TYPE;switch(t){case n.HYBRID:this._original.setMapTypeId(google.maps.MapTypeId.HYBRID),this._type.type=n.HYBRID;break;case n.NORMAL:this._original.setMapTypeId(google.maps.MapTypeId.ROADMAP),this._type.type=n.NORMAL;break;case n.SATELLITE:this._original.setMapTypeId(google.maps.MapTypeId.SATELLITE),this._type.type=n.SATELLITE;break;case n.TERRAIN:this._original.setMapTypeId(google.maps.MapTypeId.TERRAIN),this._type.type=n.TERRAIN}return this},t.prototype.getCenter=function(){var t=this._original.getCenter();return[t.lat(),t.lng()]},t.prototype.panTo=function(t){this._original.panTo(new google.maps.LatLng(t[0],t[1]))},t=n([J],t)}(),Y=function(){function t(t,n){var o=new google.maps.LatLng(t[0],t[1]),e=this.formatOpt(n,o);this._original=new google.maps.Marker(e)}return t.prototype.formatOpt=function(t,n){void 0===t&&(t={});var o={icon:t.icon?t.icon._original:null,position:n,raiseOnDrag:!t.raiseOnDrag||t.raiseOnDrag,crossOnDrag:!t.crossOnDrag||t.crossOnDrag,draggable:t.draggable};return f(L(t),o)},t.prototype.setLatLng=function(t){var n=new google.maps.LatLng(t[0],t[1]);return this._original.setPosition(n),this},t.prototype.getLatLng=function(){var t=this._original.getPosition();return[t.lat(),t.lng()]},t.prototype.setIcon=function(t){return t&&t._original&&this._original.setIcon(t._original),this},t.prototype.enableDragging=function(){return this._original&&this._original.setDraggable(!0),this},t.prototype.disableDragging=function(){return this._original&&this._original.setDraggable(!1),this},t.prototype.setLabel=function(t,n){var o={text:t||""};return f(o,n),this._original&&this._original.setLabel(o),this},t=n([J],t)}(),U=function(){function t(t,n){var o=t.map(function(t){return new google.maps.LatLng(t[0],t[1])});this._original=new google.maps.Polyline(this.formatOpt(n,o))}return t.prototype.formatOpt=function(t,n){return void 0===t&&(t={}),f(o,t),{path:n,strokeColor:o.color,strokeWeight:o.weight,strokeOpacity:o.opacity}},t.prototype.setPath=function(t){var n=t.map(function(t){return new google.maps.LatLng(t[0],t[1])});return this._original.setPath(n),this},t.prototype.getPath=function(){return this._original.getPath().getArray().map(function(t){return[t.lat(),t.lng()]})},t.prototype.setStrokeColor=function(t){return void 0===t&&(t=o.color),this._original&&this._original.setOptions({strokeColor:t}),this},t.prototype.setStrokeWeight=function(t){return void 0===t&&(t=o.weight),this._original&&this._original.setOptions({strokeWeight:t}),this},t.prototype.setStrokeOpacity=function(t){return void 0===t&&(t=o.opacity),this._original&&this._original.setOptions({strokeOpacity:t}),this},t=n([J],t)}(),Z=function(){function t(t){var n=this.formatOpt(t);this._original={url:n.url,size:n.size,anchor:n.anchor,scaledSize:n.scaledSize,labelOrigin:n.labelOrigin}}return t.prototype.formatOpt=function(t){void 0===t&&(t={});var n=t.size?new google.maps.Size(t.size[0],t.size[1]):null,o=t.labelOrigin?new google.maps.Point(t.labelOrigin[0],t.labelOrigin[1]):null,e={anchor:t.anchor?new google.maps.Point(t.anchor[0],t.anchor[1]):null,url:t.url,scaledSize:n,size:n,labelOrigin:o};return f(L(t),e)},t.prototype.setImageUrl=function(t){},t.prototype.setSize=function(t){},t.prototype.setAnchor=function(t){},t.prototype.getImageUrl=function(){return""},t.prototype.getAnchor=function(){return[]},t.prototype.getSize=function(){return[]},t}(),W=function(){function t(){this.LayerConstructor=G(),this.PopupConstructor=G(!0),this.Util={formatEvent:function(t){var n;return void 0===t&&(t={}),t.latLng&&(n=[t.latLng.lat(),t.latLng.lng()]),{type:t.ta&&t.ta.type,target:this,e:t,p:n,pixel:JSON.parse(JSON.stringify(t.pixel))}}}}return t.prototype.Map=function(t){return new j(t)},t.prototype.Layer=function(t){return new this.LayerConstructor(t)},t.prototype.Popup=function(t){return new this.PopupConstructor(t)},t.prototype.Marker=function(t,n){return new Y(t,n)},t.prototype.Polyline=function(t,n){return new U(t,n)},t.prototype.Icon=function(t){return new Z(t)},t.prototype.load=function(t,n,o){if(window.google&&window.google.maps)n&&n();else{var e=this,i="map_init_"+Math.random().toString(16).substr(2),r=document.body,a=document.createElement("SCRIPT"),s="http://ditu.google.cn/maps/api/js?key="+t+"&callback="+i;a.setAttribute("src",s),a.setAttribute("defer",""),a.setAttribute("async",""),r.appendChild(a),window[i]=function(){e.LayerConstructor=G(),e.PopupConstructor=G(!0),delete window[i],n&&n()}}},t}();function J(t){t.prototype.on=function(t,n){var o=n.bind(this),e=this._original.addListener(t,o);return new i({eventName:t,host:this,listener:e,handler:o})},t.prototype.off=function(t){google.maps.event.removeListener(t.listener)}}function G(o){void 0===o&&(o=!1);var n=window.google;if(n&&n.maps){var t=function(t){this._opt=t,this.init()};return(t.prototype=new n.maps.OverlayView).init=function(){this._box=document.createElement("div"),this._box.setAttribute("data-plain-style",""),this._latlng=this._latlng||new n.maps.LatLng(0,0),this._content=this._content||"<h1 style='background:#fff;'>custom Layer</h1>",this.createContent()},t.prototype.getStyle=function(t){var n=t||this._opt||{},o="";return n.zIndex&&"number"==typeof n.zIndex&&(o+="z-index:"+n.zIndex+";"),n.offset&&n.offset instanceof Array&&2===n.offset.length&&(o+="margin: "+n.offset[0]+"px "+n.offset[1]+"px;"),o},t.prototype.createContent=function(){var n=this;if(this._box.innerHTML="",o){if(b(this._box),this._box.classList.add("popup-box"),this._contentBox=document.createElement("div"),this._box.innerHTML="<div class='popup-arrow'></div>",this._contentBox.classList.add("popup-content"),"string"==typeof this._content?this._contentBox.innerHTML=this._content:this._contentBox.appendChild(this._content),this._box.appendChild(this._contentBox),this._opt&&!0===this._opt.closeBtn){var t=document.createElement("button");t.setAttribute("type","button"),t.classList.add("popup-close"),t.innerHTML="Ã—",t.addEventListener("click",function(t){n.hide()}),this._box.appendChild(t)}}else"string"==typeof this._content?this._box.innerHTML=this._content:this._box.appendChild(this._content)},t.prototype.onAdd=function(){var t=this.getPanes();this.createContent(),t.overlayImage.appendChild(this._box)},t.prototype.draw=function(){var t=this.getProjection();if(t){var n=t.fromLatLngToDivPixel(this._latlng),o="position: absolute; left: "+~~n.x+"px; top: "+~~n.y+"px;";o+=this.getStyle(this._opt),v(this._box,o)}},t.prototype.remove=function(){this._box.parentNode.removeChild(this._box),this._content=null,this._contentBox=null,this._box=null},t.prototype.setContent=function(t){this._content=t;var n=o?this._contentBox:this._box;return t instanceof Element?(n.innerHTML="",n.appendChild(t)):n.innerHTML=t,this},t.prototype.setLatLng=function(t){return void 0===t&&(t=[0,0]),this._latlng=new n.maps.LatLng(t[0],t[1]),this.draw(),this},t.prototype.mount=function(t){return this.init(),this.setMap(t._original),this},t.prototype.unmount=function(){return this.setMap(null),this},t.prototype.show=function(){return this._box&&(this._box.style.display="block"),this},t.prototype.hide=function(){return this._box&&(this._box.style.display="none"),this},t}}function V(){return function(t,n,o){var e=o.value;o.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o=e.call(this,t);return o._id=Math.random().toString(16).substr(2),o}}}return function(){function t(t){var n=this;t&&this.use(t),this.Util={formatEvent:function(t){return n.factory.Util.formatEvent.call(this,t)}},f(this.Util,w),this._v=e;var o=document.createElement("style");o.innerHTML="\n.popup-box[data-plain-style] {\n    z-index: 9;\n    padding: 0 0 14px 0;\n    cursor: arrow;\n    transform: translate3d(-50%, -100%, 0);\n    translate: transform ease 0;\n    animation: fade-in-data-plain-style linear 0.12s;\n    pointer-events: auto !important;\n    cursor: auto;\n}\n.popup-box[data-plain-style] .popup-content {\n    padding: 0.5rem 1rem;\n    min-height: 2rem;\n    min-width: 4rem;\n    color: #222;\n    box-shadow: 0 3px 12px rgba(0,0,0,0.38);\n    background: #fff;\n    border-radius: 4px;\n}\n.popup-box[data-plain-style] .popup-arrow{\n    position: absolute;\n    left: 50%;\n    bottom: 0;\n    height: 14px;\n    width: 28px;\n    overflow: hidden;\n    transform: translate3d(-50%, 0, 0);\n}\n.popup-box[data-plain-style] .popup-close {\n    position: absolute;\n    display: block;\n    right: 0;\n    top: 0;\n    height: 20px;\n    width: 20px;\n    border: none;\n    color: #888;\n    font-size: 20px;\n    line-height: 14px;\n    cursor: pointer;\n    background: transparent;\n    outline: none;\n}\n.popup-box[data-plain-style] .popup-close:hover {\n    color: #666;\n}\n.popup-box[data-plain-style] .popup-arrow::after {\n    display: block;\n    content: '';\n    position: absolute;\n    top: -12px;\n    left: 3px;\n    background: #fff;\n    height: 20px;\n    width: 20px;\n    border-radius: 2px;\n    transform: rotate3d(0, 0, 1, 45deg);\n    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.34);\n}\n@keyframes fade-in-data-plain-style {\n    0% {\n        opacity: 0;\n    }\n    100% {\n        opacity: 1;\n    }\n}\n\n/**\n *  BMAP */\n/**\n *  AMAP */\n.amap-marker-label {\n    border: none;\n    background: transparent;\n}\n",document.head.appendChild(o)}return t.prototype.use=function(t,n){if("string"==typeof t)switch(t){case"BMAP":this.factory=new D;break;case"GMAP":this.factory=new W;break;case"AMAP":this.factory=new k}else this.factory=t;return this},t.prototype.Map=function(t){var n=t[0];return this.factory.Map(n)},t.prototype.Layer=function(t){var n=t[0];return this.factory.Layer(n)},t.prototype.Popup=function(t){var n=t[0];return this.factory.Popup(n)},t.prototype.Marker=function(t){var n=t[0],o=t[1];return this.factory.Marker(n,o)},t.prototype.Polyline=function(t){var n=t[0],o=t[1];return this.factory.Polyline(n,o)},t.prototype.Icon=function(t){var n=t[0];return this.factory.Icon(n)},t.prototype.loadMap=function(t,n,o){this.factory.load(t,n,o)},n([V()],t.prototype,"Map",null),n([V()],t.prototype,"Layer",null),n([V()],t.prototype,"Popup",null),n([V()],t.prototype,"Marker",null),n([V()],t.prototype,"Polyline",null),n([V()],t.prototype,"Icon",null),t}()});

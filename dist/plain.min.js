/**
 * This file is created by xingzheFE.
 * https://github.com/XingzheFE/
 * Tue Jul 17 2018 22:45:23 GMT+0800 (CST)
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.Plain=n()}(this,function(){"use strict";function t(t,n,o,e){var i,r=arguments.length,a=r<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,o):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,o,e);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(n,o,a):i(n,o))||a);return r>3&&a&&Object.defineProperty(n,o,a),a}var n={DEBUG:!0,name:"plain",coordType:"DEFAULT",setCoordType:function(t){this.coordType=t}},o=function(){return function(t){this.eventName=t.eventName,this.host=t.host,this.handler=t.handler,this.listener=t.listener}}(),e={color:"#3388ff",weight:3,opacity:.8},i=52.35987755982988,r=3.141592653589793,a=6378245,s=.006693421622965943,p=function(t,n){var o=2*(n=+n)-100+3*(t=+t)+.2*t*t+.1*n*t+.2*Math.sqrt(Math.abs(n));return o+=2*(20*Math.sin(6*n*r)+20*Math.sin(2*n*r))/3,o+=2*(20*Math.sin(t*r)+40*Math.sin(t/3*r))/3,o+=2*(160*Math.sin(t/12*r)+320*Math.sin(t*r/30))/3},c=function(t,n){var o=300+(n=+n)+2*(t=+t)+.1*n*n+.1*n*t+.1*Math.sqrt(Math.abs(n));return o+=2*(20*Math.sin(6*n*r)+20*Math.sin(2*n*r))/3,o+=2*(20*Math.sin(n*r)+40*Math.sin(n/3*r))/3,o+=2*(150*Math.sin(n/12*r)+300*Math.sin(n/30*r))/3},u=function(t,n){t=+t;return!((n=+n)>73.66&&n<135.05&&t>3.86&&t<53.55)},l={bd09togcj02:function(t,n){var o=(n=+n)-.0065,e=(t=+t)-.006,r=Math.sqrt(o*o+e*e)-2e-5*Math.sin(e*i),a=Math.atan2(e,o)-3e-6*Math.cos(o*i),s=r*Math.cos(a);return[r*Math.sin(a),s]},gcj02tobd09:function(t,n){t=+t,n=+n;var o=Math.sqrt(n*n+t*t)+2e-5*Math.sin(t*i),e=Math.atan2(t,n)+3e-6*Math.cos(n*i),r=o*Math.cos(e)+.0065;return[o*Math.sin(e)+.006,r]},wgs84togcj02:function(t,n){if(u(t=+t,n=+n))return[t,n];var o=p(t-35,n-105),e=c(t-35,n-105),i=t/180*r,l=Math.sin(i);l=1-s*l*l;var h=Math.sqrt(l);return[t+(o=180*o/(a*(1-s)/(l*h)*r)),n+(e=180*e/(a/h*Math.cos(i)*r))]},gcj02towgs84:function(t,n){if(u(t=+t,n=+n))return[t,n];var o=p(t-35,n-105),e=c(t-35,n-105),i=t/180*r,l=Math.sin(i);l=1-s*l*l;var h=Math.sqrt(l);return[2*t-(t+(o=180*o/(a*(1-s)/(l*h)*r))),2*n-(n+(e=180*e/(a/h*Math.cos(i)*r)))]}};function h(t){var n=t[0][0],o=t[0][1],e=n,i=o;return t.map(function(t){t[0]<n?n=t[0]:t[0]>e&&(e=t[0]),t[1]<o?o=t[1]:t[1]>i&&(i=t[1])}),[[n,o],[e,i]]}function g(t,n){if(Object.assign)Object.assign(t,n);else for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);return t}function f(t){return t[0]instanceof Array?t.map(function(t){return l.gcj02tobd09(t[0],t[1])}):l.gcj02tobd09(t[0],t[1])}function y(t){return t[0]instanceof Array?t.map(function(t){return l.bd09togcj02(t[0],t[1])}):l.bd09togcj02(t[0],t[1])}function d(t){if(!(t[0]instanceof Array)){var n=l.wgs84togcj02(t[0],t[1]);return l.gcj02tobd09(n[0],n[1])}return t.map(function(t){return l.wgs84togcj02(t[0],t[1])}).map(function(t){return l.gcj02tobd09(t[0],t[1])})}function _(t){if(!(t[0]instanceof Array)){var n=l.bd09togcj02(t[0],t[1]);return l.gcj02towgs84(n[0],n[1])}return t.map(function(t){return l.bd09togcj02(t[0],t[1])}).map(function(t){return l.gcj02towgs84(t[0],t[1])})}function m(t,n){void 0===n&&(n=["click","dblclick"]),n.map(function(n){t.addEventListener(n,function(t){t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation()})})}function b(t,n){n.split(";").map(function(n){var o=n.split(":");t.style[v(o[0])]=v(o[1])})}function v(t){return void 0===t&&(t=""),t.replace(/^\s+|\s+$/g,"")}function M(t){return"object"==typeof t?JSON.parse(JSON.stringify(t)):t}var L=Object.freeze({log:function(t){t instanceof Error?console.error(t):n.DEBUG&&console.log("["+n.name+"] ",t)},getBound:h,objectAssign:g,g2b:f,b2g:y,w2g:function(t){return t[0]instanceof Array?t.map(function(t){return l.wgs84togcj02(t[0],t[1])}):l.wgs84togcj02(t[0],t[1])},g2w:function(t){return t[0]instanceof Array?t.map(function(t){return l.gcj02towgs84(t[0],t[1])}):l.gcj02towgs84(t[0],t[1])},w2b:d,b2w:_,locate:function(t,n){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(n){t&&t(n.coords.latitude,n.coords.longitude)},function(t){n&&n(t)}):n&&n(new Error("Geolocation is not supported by your browser"))},stopPropagation:m,setStyle:b,trim:v,clone:M}),w=function(){function n(t){this.MAP_TYPE={HYBRID:"HYBRID",NORMAL:"NORMAL",SATELLITE:"SATELLITE"},this._type={map:"AMAP",type:this.MAP_TYPE.NORMAL},this._original=new AMap.Map(t.container,{zoom:t.zoom,center:t.center.slice().reverse()})}return n.prototype.addLayer=function(t){if(t)if(t instanceof Array)for(var n=0;n<t.length;n++)t[n]._original.setMap(this._original);else t._original.setMap(this._original)},n.prototype.removeLayer=function(t){if(t instanceof Array)for(var n=0;n<t.length;n++)t[n]._original.setMap(null);else t._original.setMap(null)},n.prototype.clearLayers=function(){this._original.clearMap()},n.prototype.setZoom=function(t){this._original.setZoom(t)},n.prototype.getZoom=function(){return this._original.getZoom()},n.prototype.zoomIn=function(){this._original.zoomIn()},n.prototype.zoomOut=function(){this._original.zoomOut()},n.prototype.fitView=function(t,n){var o=this,e=h(t);this._boundMarkers?e.map(function(t,n,e){o._boundMarkers[n].setPosition([t[1],t[0]])}):(this._boundIcon=new AMap.Icon({size:new AMap.Size(0,0)}),this._boundMarkers=e.map(function(t){return new AMap.Marker({map:o._original,icon:o._boundIcon,position:[t[1],t[0]]})})),this._original.setFitView(this._boundMarkers),this._original.remove(this._boundMarkers)},n.prototype.setCenter=function(t){this._original.setCenter(new AMap.LngLat(t[1],t[0]))},n.prototype.getCenter=function(){var t=this._original.getCenter();return[t.lat,t.lng]},n.prototype.panTo=function(t){this._original.panTo(t.slice().reverse())},n.prototype.setMapType=function(t){var n=this.MAP_TYPE;switch(t){case n.HYBRID:this._type.type=n.HYBRID,this._original.setLayers([new AMap.TileLayer.Satellite,new AMap.TileLayer.RoadNet]);break;case n.NORMAL:this._type.type=n.NORMAL,this._original.setLayers([new AMap.TileLayer]);break;case n.SATELLITE:this._type.type=n.SATELLITE,this._original.setLayers([new AMap.TileLayer.Satellite]);break;case n.TERRAIN:}return this},n=t([k],n)}(),x=function(){function t(t){this._opt=t,this._original=new AMap.Marker({bubble:!1,clickable:!1,position:[0,0],content:"custom Layer",offset:new AMap.Pixel(0,0)})}return t.prototype.setLatLng=function(t){return this._original&&this._original.setPosition(t.slice().reverse()),this},t.prototype.setContent=function(t){return void 0===t&&(t=""),this._original.setContent(t),this},t.prototype.mount=function(t){return this._original.setMap(t._original),this},t.prototype.unmount=function(){return this._original.setMap(null),this},t.prototype.show=function(){return this._original.show(),this},t.prototype.hide=function(){return this._original.hide(),this},t.prototype.remove=function(){this._box=null,this._contentBox=null,this._original=null},t}(),A=function(t){function n(n){var o=this;if(t.call(this,n),this._box=document.createElement("div"),this._box.classList.add("popup-box"),this._box.setAttribute("data-plain-style",""),this._box.setAttribute("style",this.getStyle(n)),this._contentBox=document.createElement("div"),this._box.innerHTML='<div class="popup-arrow"></div',this._contentBox.classList.add("popup-content"),this._box.appendChild(this._contentBox),m(this._box,["mouseup","mousedown"]),this._original=new AMap.Marker({bubble:!1,position:[0,0],content:this._box,zIndex:n&&n.zIndex?n.zIndex:999}),n&&!0===n.closeBtn){var e=document.createElement("button");e.setAttribute("type","button"),e.classList.add("popup-close"),e.innerHTML="Ã—",e.addEventListener("click",function(t){o.hide()}),this._box.appendChild(e)}}return function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);function e(){this.constructor=t}t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(n,t),n.prototype.getStyle=function(t){void 0===t&&(t={});var n="position: absolute;left: 10px;";return t.zIndex&&"number"==typeof t.zIndex&&(n+="z-index:"+t.zIndex+";"),t.offset&&t.offset instanceof Array&&2===t.offset.length&&(n+="margin: "+(t.offset[0]+30)+"px "+t.offset[1]+"px;"),n},n.prototype.createContent=function(t){"string"==typeof t?this._contentBox.innerHTML=t:(this._contentBox.innerHTML="",this._contentBox.appendChild(t))},n.prototype.setContent=function(t){return this.createContent(t),this},n}(x),O=function(){function n(t,n){var o=this.formatOpt(n,t);this._original=new AMap.Marker(o)}return n.prototype.formatOpt=function(t,n){void 0===t&&(t={});var o={map:null,position:[n[1],n[0]],icon:t.icon?t.icon._original:null,raiseOnDrag:!t.raiseOnDrag||t.raiseOnDrag,crossOnDrag:!t.crossOnDrag||t.crossOnDrag,draggable:t.draggable};return t.icon&&t.icon.anchor&&(o.offset=new AMap.Pixel(-t.icon.anchor[0],-t.icon.anchor[1])),g(M(t),o)},n.prototype.setLatLng=function(t){return this._original.setPosition(t.slice().reverse()),this},n.prototype.getLatLng=function(){var t=this._original.getPosition();return[t.lat,t.lng]},n.prototype.setIcon=function(t){return t&&t._original&&this._original.setIcon(t._original),this},n.prototype.enableDragging=function(){return this._original&&this._original.setDraggable(!0),this},n.prototype.disableDragging=function(){return this._original&&this._original.setDraggable(!1),this},n.prototype.setLabel=function(t,n){return void 0===t&&(t=""),this._original.setLabel({content:t}),this},n=t([k],n)}(),P=function(){function n(t,n){var o=t.map(function(t){return[t[1],t[0]]}),e=this.formatOpt(n,o);this._original=new AMap.Polyline(e)}return n.prototype.formatOpt=function(t,n){return void 0===t&&(t={}),g(e,t),{path:n,strokeColor:e.color,strokeWeight:e.weight,strokeOpacity:e.opacity}},n.prototype.setPath=function(t){var n=t.map(function(t){return[t[1],t[0]]});return this._original.setPath(n),this},n.prototype.getPath=function(){return(this._original.getPath()||[]).map(function(t){return[t.lat,t.lng]})},n.prototype.setStrokeColor=function(t){return void 0===t&&(t=e.color),this._original&&this._original.setOptions({strokeColor:t}),this},n.prototype.setStrokeWeight=function(t){return void 0===t&&(t=e.weight),this._original&&this._original.setOptions({strokeWeight:t}),this},n.prototype.setStrokeOpacity=function(t){return void 0===t&&(t=e.opacity),this._original&&this._original.setOptions({strokeOpacity:t}),this},n=t([k],n)}(),T=function(){function t(t){var n=this.formatOpt(t);this._original=new AMap.Icon(n),this.anchor=t.anchor}return t.prototype.formatOpt=function(t){void 0===t&&(t={});var n=t.url,o=t.size?new AMap.Size(t.size[0],t.size[1]):null;return{image:n,size:o,imageSize:o}},t.prototype.setImageUrl=function(t){},t.prototype.setSize=function(t){},t.prototype.setAnchor=function(t){},t.prototype.getImageUrl=function(){return""},t.prototype.getAnchor=function(){return[]},t.prototype.getSize=function(){return[]},t}(),I=function(){function t(){this.Util={formatEvent:function(t){var n;return void 0===t&&(t={}),t.lnglat&&(n=[t.lnglat.lat,t.lnglat.lng]),{type:t.type.replace(/^on/g,""),target:this,e:t,p:n,pixel:JSON.parse(JSON.stringify(t.pixel))}}}}return t.prototype.Map=function(t){return new w(t)},t.prototype.Layer=function(t){return new x(t)},t.prototype.Popup=function(t){return new A(t)},t.prototype.Marker=function(t,n){return new O(t,n)},t.prototype.Polyline=function(t,n){return new P(t,n)},t.prototype.Icon=function(t){return new T(t)},t.prototype.load=function(t,n,o){if(window.AMap)n&&n();else{var e="map_init_"+Math.random().toString(16).substr(2),i=document.body,r=document.createElement("SCRIPT"),a="https://webapi.amap.com/maps?v=1.3&key="+t+"&callback="+e;r.setAttribute("src",a),r.setAttribute("defer",""),r.setAttribute("async",""),i.appendChild(r),window[e]=function(){delete window[e],n&&n()}}},t}();function k(t){t.prototype.on=function(t,n){var e=n.bind(this),i=this._original.on(t,e);return new o({eventName:t,host:this,listener:i,handler:e})},t.prototype.off=function(t){this._original.off(t.eventName,t.handler)}}var C=function(){function n(t){var n=t.center?R(t.center):[0,0],o=new BMap.Point(n[1],n[0]);this._original=new BMap.Map(t.container),this._original.centerAndZoom(o,t.zoom||15),this._original.enableScrollWheelZoom(),this.MAP_TYPE={HYBRID:"HYBRID",NORMAL:"NORMAL",SATELLITE:"SATELLITE"},this._type={map:"BMAP",type:this.MAP_TYPE.NORMAL}}return n.prototype.addLayer=function(t){if(t)if(t instanceof Array)for(var n=0;n<t.length;n++)this._original.addOverlay(t[n]._original);else this._original.addOverlay(t._original)},n.prototype.removeLayer=function(t){if(t instanceof Array)for(var n=0;n<t.length;n++)this._original.removeOverlay(t[n]._original);else this._original.removeOverlay(t._original)},n.prototype.clearLayers=function(){this._original.clearOverlays()},n.prototype.setZoom=function(t){this._original.setZoom(t)},n.prototype.getZoom=function(){return this._original.getZoom()},n.prototype.zoomIn=function(){this._original.zoomIn()},n.prototype.zoomOut=function(){this._original.zoomOut()},n.prototype.fitView=function(t,n){var o=R(t).map(function(t){return{lat:t[0],lng:t[1]}});this._original.setViewport(o)},n.prototype.setCenter=function(t){t=R(t),this._original.setCenter(new BMap.Point(t[1],t[0]))},n.prototype.getCenter=function(){var t=this._original.getCenter();return[t.lat,t.lng]},n.prototype.panTo=function(t){this._original.panTo(new BMap.Point(t[1],t[0]))},n.prototype.setMapType=function(t){var n=this.MAP_TYPE;switch(t){case n.HYBRID:this._original.setMapType(BMAP_HYBRID_MAP),this._type.type=n.HYBRID;break;case n.NORMAL:this._original.setMapType(BMAP_NORMAL_MAP),this._type.type=n.NORMAL;break;case n.SATELLITE:this._original.setMapType(BMAP_SATELLITE_MAP),this._type.type=n.SATELLITE;break;case n.TERRAIN:}return this},n=t([D],n)}(),E=function(){function n(t,n){t=R(t);var o=new BMap.Point(t[1],t[0]),e=this.formatOpt(n);this._original=new BMap.Marker(o,e)}return n.prototype.formatOpt=function(t){void 0===t&&(t={});var n={icon:t.icon?t.icon._original:null,raiseOnDrag:!t.raiseOnDrag||t.raiseOnDrag,crossOnDrag:!t.crossOnDrag||t.crossOnDrag,enableDragging:t.draggable};return g(M(t),n)},n.prototype.setLatLng=function(t){t=R(t);var n=new BMap.Point(t[1],t[0]);return this._original.setPosition(n),this},n.prototype.getLatLng=function(){var t=this._original.getPosition();return R([t.lat,t.lng],"output")},n.prototype.setIcon=function(t){return t&&t._original&&this._original.setIcon(t._original),this},n.prototype.enableDragging=function(){return this._original&&this._original.enableDragging(),this},n.prototype.disableDragging=function(){return this._original&&this._original.disableDragging(),this},n.prototype.setLabel=function(t,n){void 0===t&&(t="");var o=this._original.getLabel(),e={border:"none",background:"transparent",zIndex:1};return o?o.setContent(t):(o=new BMap.Label(t),this._original&&this._original.setLabel(o)),o.setStyle(g(e,n)),o.setZIndex(e.zIndex),this},n=t([D],n)}(),z=function(){function n(t,n){var o=R(t).map(function(t){return new BMap.Point(t[1],t[0])});this._original=new BMap.Polyline(o,this.formatOpt(n))}return n.prototype.formatOpt=function(t){return void 0===t&&(t={}),g(e,t),{strokeColor:e.color,strokeWeight:e.weight,strokeOpacity:e.opacity}},n.prototype.setPath=function(t){var n=R(t).map(function(t){return new BMap.Point(t[1],t[0])});return this._original.setPath(n),this},n.prototype.getPath=function(){return R((this._original.getPath()||[]).map(function(t){return[t.lat,t.lng]}),"output")},n.prototype.setStrokeColor=function(t){return void 0===t&&(t=e.color),this._original&&this._original.setStrokeColor(t),this},n.prototype.setStrokeWeight=function(t){return void 0===t&&(t=e.weight),this._original&&this._original.setStrokeWeight(t),this},n.prototype.setStrokeOpacity=function(t){return void 0===t&&(t=e.opacity),this._original&&this._original.setStrokeOpacity(t),this},n=t([D],n)}(),S=function(){function t(t){var n=this.formatOpt(t);this._original=new BMap.Icon(n.url,n.size,n),this._original.setImageSize(n.size)}return t.prototype.formatOpt=function(t){return void 0===t&&(t={}),{anchor:t.anchor?new BMap.Size(t.anchor[0],t.anchor[1]):null,url:t.url,size:t.size?new BMap.Size(t.size[0],t.size[1]):null}},t.prototype.setImageUrl=function(t){},t.prototype.setSize=function(t){},t.prototype.setAnchor=function(t){},t.prototype.getImageUrl=function(){return""},t.prototype.getAnchor=function(){return[]},t.prototype.getSize=function(){return[]},t}(),B=function(){function t(){this.LayerConstructor=N(),this.PopupConstructor=N(!0),this.Util={formatEvent:function(t){var n;return void 0===t&&(t={}),t.point&&(n=R([t.point.lat,t.point.lng],"output")),{type:t.type.replace(/^on/g,""),target:this,e:t,p:n,pixel:JSON.parse(JSON.stringify(t.pixel))}}}}return t.prototype.Map=function(t){return new C(t)},t.prototype.Layer=function(t){return new this.LayerConstructor(t)},t.prototype.Popup=function(t){return new this.PopupConstructor(t)},t.prototype.Marker=function(t,n){return new E(t,n)},t.prototype.Polyline=function(t,n){return new z(t,n)},t.prototype.Icon=function(t){return new S(t)},t.prototype.load=function(t,n,o){if(window.BMap)n&&n();else{var e=this,i="map_init_"+Math.random().toString(16).substr(2),r=document.body,a=document.createElement("SCRIPT"),s="https://api.map.baidu.com/api?v=2.0&ak="+t+"&callback="+i;a.setAttribute("src",s),a.setAttribute("defer",""),a.setAttribute("async",""),r.appendChild(a),window[i]=function(){e.LayerConstructor=N(),e.PopupConstructor=N(!0),delete window[i],n&&n()}}},t}();function D(t){t.prototype.on=function(t,n){var e=n.bind(this),i=this._original.addEventListener(t,e);return new o({eventName:t,host:this,listener:i,handler:e})},t.prototype.off=function(t){this._original.removeEventListener(t.eventName,t.handler)}}function R(t,o){if("output"===o){if("DEFAULT"===n.coordType)return t;switch(n.coordType){case"DEFAULT":return t;case"GCJ02":return y(t);case"BD09":return t;case"WGS84":return _(t)}}else{if("DEFAULT"===n.coordType)return t;switch(n.coordType){case"DEFAULT":return t;case"GCJ02":return f(t);case"BD09":return t;case"WGS84":return d(t)}}}function N(t){void 0===t&&(t=!1);var n=window.BMap;if(n){var o=function(t){this._box=document.createElement("div"),this._box.setAttribute("data-plain-style",""),this._opt=t,this._latlng=this._latlng||new n.Point(0,0),this._content=this._content||'<h1 style="background:#fff;">custom Layer</h1>',this.createContent()};return(o.prototype=new n.Overlay).initialize=function(t){return this._map=t,this.createContent(),t.getPanes().markerPane.appendChild(this._box),this._box},o.prototype.getStyle=function(t){var n=t||this._opt||{},o="";return n.zIndex&&"number"==typeof n.zIndex&&(o+="z-index:"+n.zIndex+";"),n.offset&&n.offset instanceof Array&&2===n.offset.length&&(o+="margin: "+n.offset[0]+"px "+n.offset[1]+"px;"),o},o.prototype.createContent=function(){var n=this;if(this._box.innerHTML="",t){if(m(this._box,["click","dblclick","mousedown"]),this._box.classList.add("popup-box"),this._contentBox=document.createElement("div"),this._box.innerHTML='<div class="popup-arrow"></div>',this._contentBox.classList.add("popup-content"),"string"==typeof this._content?this._contentBox.innerHTML=this._content:this._contentBox.appendChild(this._content),this._box.appendChild(this._contentBox),this._opt&&!0===this._opt.closeBtn){var o=document.createElement("button");o.setAttribute("type","button"),o.classList.add("popup-close"),o.innerHTML="Ã—",o.addEventListener("click",function(t){n.hide()}),this._box.appendChild(o)}}else"string"==typeof this._content?this._box.innerHTML=this._content:this._box.appendChild(this._content)},o.prototype.draw=function(){if(this._map){var t=this._map.pointToOverlayPixel(this._latlng),n="position: absolute; left: "+~~t.x+"px; top: "+~~t.y+"px;";n+=this.getStyle(this._opt),b(this._box,n)}},o.prototype.remove=function(){this._box.parentNode.removeChild(this._box),this._content=null,this._contentBox=null,this._box=null},o.prototype.setContent=function(n){this._content=n;var o=t?this._contentBox:this._box;return n instanceof Element?(o.innerHTML="",o.appendChild(n)):o.innerHTML=n,this},o.prototype.setLatLng=function(t){return void 0===t&&(t=[0,0]),t=R(t),this._latlng=new n.Point(t[1],t[0]),this.draw(),this},o.prototype.mount=function(t){return t._original.addOverlay(this),this},o.prototype.unmount=function(){return this._map.removeOverlay(this),this},o.prototype.show=function(){return this._box&&(this._box.style.display="block"),this},o.prototype.hide=function(){return this._box&&(this._box.style.display="none"),this},o}}var H=function(){function n(t){var n=new google.maps.LatLng(t.center[0],t.center[1]),o="string"==typeof t.container?document.getElementById(t.container):t.container;this._original=new google.maps.Map(o,{zoom:t.zoom,center:n,mapTypeControl:!1,fullscreenControl:!1,scaleControl:!1,streetViewControl:!1,zoomControl:!1}),this.MAP_TYPE={HYBRID:"HYBRID",NORMAL:"NORMAL",TERRAIN:"TERRAIN",SATELLITE:"SATELLITE"},this._type={map:"GMAP",type:this.MAP_TYPE.NORMAL}}return n.prototype.addLayer=function(t){if(t)if(t instanceof Array)for(var n=0;n<t.length;n++)t[n]._original.setMap(this._original);else t._original.setMap(this._original)},n.prototype.removeLayer=function(t){if(t instanceof Array)for(var n=0;n<t.length;n++)t[n]._original.setMap(null);else t._original.setMap(null)},n.prototype.clearLayers=function(){this._original.clearOverlays()},n.prototype.setZoom=function(t){this._original.setZoom(t)},n.prototype.getZoom=function(){return this._original.getZoom()},n.prototype.zoomIn=function(){this.setZoom(this.getZoom()+1)},n.prototype.zoomOut=function(){this.setZoom(this.getZoom()-1)},n.prototype.fitView=function(t,n){var o=h(t).map(function(t){return new google.maps.LatLng(t[0],t[1])}),e=new google.maps.LatLngBounds(o[0],o[1]);this._original.fitBounds(e)},n.prototype.setCenter=function(t){this._original.setCenter({lat:t[0],lng:t[1]})},n.prototype.setMapType=function(t){var n=this.MAP_TYPE;switch(t){case n.HYBRID:this._original.setMapTypeId(google.maps.MapTypeId.HYBRID),this._type.type=n.HYBRID;break;case n.NORMAL:this._original.setMapTypeId(google.maps.MapTypeId.ROADMAP),this._type.type=n.NORMAL;break;case n.SATELLITE:this._original.setMapTypeId(google.maps.MapTypeId.SATELLITE),this._type.type=n.SATELLITE;break;case n.TERRAIN:this._original.setMapTypeId(google.maps.MapTypeId.TERRAIN),this._type.type=n.TERRAIN}return this},n.prototype.getCenter=function(){var t=this._original.getCenter();return[t.lat(),t.lng()]},n.prototype.panTo=function(t){this._original.panTo(new google.maps.LatLng(t[0],t[1]))},n=t([W],n)}(),j=function(){function n(t,n){var o=new google.maps.LatLng(t[0],t[1]),e=this.formatOpt(n,o);this._original=new google.maps.Marker(e)}return n.prototype.formatOpt=function(t,n){void 0===t&&(t={});var o={icon:t.icon?t.icon._original:null,position:n,raiseOnDrag:!t.raiseOnDrag||t.raiseOnDrag,crossOnDrag:!t.crossOnDrag||t.crossOnDrag,draggable:t.draggable};return g(M(t),o)},n.prototype.setLatLng=function(t){var n=new google.maps.LatLng(t[0],t[1]);return this._original.setPosition(n),this},n.prototype.getLatLng=function(){var t=this._original.getPosition();return[t.lat(),t.lng()]},n.prototype.setIcon=function(t){return t&&t._original&&this._original.setIcon(t._original),this},n.prototype.enableDragging=function(){return this._original&&this._original.setDraggable(!0),this},n.prototype.disableDragging=function(){return this._original&&this._original.setDraggable(!1),this},n.prototype.setLabel=function(t,n){var o={text:t||""};return g(o,n),this._original&&this._original.setLabel(o),this},n=t([W],n)}(),Y=function(){function n(t,n){var o=t.map(function(t){return new google.maps.LatLng(t[0],t[1])});this._original=new google.maps.Polyline(this.formatOpt(n,o))}return n.prototype.formatOpt=function(t,n){return void 0===t&&(t={}),g(e,t),{path:n,strokeColor:e.color,strokeWeight:e.weight,strokeOpacity:e.opacity}},n.prototype.setPath=function(t){var n=t.map(function(t){return new google.maps.LatLng(t[0],t[1])});return this._original.setPath(n),this},n.prototype.getPath=function(){return this._original.getPath().getArray().map(function(t){return[t.lat(),t.lng()]})},n.prototype.setStrokeColor=function(t){return void 0===t&&(t=e.color),this._original&&this._original.setOptions({strokeColor:t}),this},n.prototype.setStrokeWeight=function(t){return void 0===t&&(t=e.weight),this._original&&this._original.setOptions({strokeWeight:t}),this},n.prototype.setStrokeOpacity=function(t){return void 0===t&&(t=e.opacity),this._original&&this._original.setOptions({strokeOpacity:t}),this},n=t([W],n)}(),U=function(){function t(t){var n=this.formatOpt(t);this._original={url:n.url,size:n.size,anchor:n.anchor,scaledSize:n.scaledSize,labelOrigin:n.labelOrigin}}return t.prototype.formatOpt=function(t){void 0===t&&(t={});var n=t.size?new google.maps.Size(t.size[0],t.size[1]):null,o=t.labelOrigin?new google.maps.Point(t.labelOrigin[0],t.labelOrigin[1]):null,e={anchor:t.anchor?new google.maps.Point(t.anchor[0],t.anchor[1]):null,url:t.url,scaledSize:n,size:n,labelOrigin:o};return g(M(t),e)},t.prototype.setImageUrl=function(t){},t.prototype.setSize=function(t){},t.prototype.setAnchor=function(t){},t.prototype.getImageUrl=function(){return""},t.prototype.getAnchor=function(){return[]},t.prototype.getSize=function(){return[]},t}(),Z=function(){function t(){this.LayerConstructor=J(),this.PopupConstructor=J(!0),this.Util={formatEvent:function(t){var n;return void 0===t&&(t={}),t.latLng&&(n=[t.latLng.lat(),t.latLng.lng()]),{type:t.ta&&t.ta.type,target:this,e:t,p:n,pixel:JSON.parse(JSON.stringify(t.pixel))}}}}return t.prototype.Map=function(t){return new H(t)},t.prototype.Layer=function(t){return new this.LayerConstructor(t)},t.prototype.Popup=function(t){return new this.PopupConstructor(t)},t.prototype.Marker=function(t,n){return new j(t,n)},t.prototype.Polyline=function(t,n){return new Y(t,n)},t.prototype.Icon=function(t){return new U(t)},t.prototype.load=function(t,n,o){if(window.google&&window.google.maps)n&&n();else{var e=this,i="map_init_"+Math.random().toString(16).substr(2),r=document.body,a=document.createElement("SCRIPT"),s="http://ditu.google.cn/maps/api/js?key="+t+"&callback="+i;a.setAttribute("src",s),a.setAttribute("defer",""),a.setAttribute("async",""),r.appendChild(a),window[i]=function(){e.LayerConstructor=J(),e.PopupConstructor=J(!0),delete window[i],n&&n()}}},t}();function W(t){t.prototype.on=function(t,n){var e=n.bind(this),i=this._original.addListener(t,e);return new o({eventName:t,host:this,listener:i,handler:e})},t.prototype.off=function(t){google.maps.event.removeListener(t.listener)}}function J(t){void 0===t&&(t=!1);var n=window.google;if(n&&n.maps){var o=function(t){this._opt=t,this.init()};return(o.prototype=new n.maps.OverlayView).init=function(){this._box=document.createElement("div"),this._box.setAttribute("data-plain-style",""),this._latlng=this._latlng||new n.maps.LatLng(0,0),this._content=this._content||"<h1 style='background:#fff;'>custom Layer</h1>",this.createContent()},o.prototype.getStyle=function(t){var n=t||this._opt||{},o="";return n.zIndex&&"number"==typeof n.zIndex&&(o+="z-index:"+n.zIndex+";"),n.offset&&n.offset instanceof Array&&2===n.offset.length&&(o+="margin: "+n.offset[0]+"px "+n.offset[1]+"px;"),o},o.prototype.createContent=function(){var n=this;if(this._box.innerHTML="",t){if(m(this._box),this._box.classList.add("popup-box"),this._contentBox=document.createElement("div"),this._box.innerHTML="<div class='popup-arrow'></div>",this._contentBox.classList.add("popup-content"),"string"==typeof this._content?this._contentBox.innerHTML=this._content:this._contentBox.appendChild(this._content),this._box.appendChild(this._contentBox),this._opt&&!0===this._opt.closeBtn){var o=document.createElement("button");o.setAttribute("type","button"),o.classList.add("popup-close"),o.innerHTML="Ã—",o.addEventListener("click",function(t){n.hide()}),this._box.appendChild(o)}}else"string"==typeof this._content?this._box.innerHTML=this._content:this._box.appendChild(this._content)},o.prototype.onAdd=function(){var t=this.getPanes();this.createContent(),t.overlayImage.appendChild(this._box)},o.prototype.draw=function(){var t=this.getProjection();if(t){var n=t.fromLatLngToDivPixel(this._latlng),o="position: absolute; left: "+~~n.x+"px; top: "+~~n.y+"px;";o+=this.getStyle(this._opt),b(this._box,o)}},o.prototype.remove=function(){this._box.parentNode.removeChild(this._box),this._content=null,this._contentBox=null,this._box=null},o.prototype.setContent=function(n){this._content=n;var o=t?this._contentBox:this._box;return n instanceof Element?(o.innerHTML="",o.appendChild(n)):o.innerHTML=n,this},o.prototype.setLatLng=function(t){return void 0===t&&(t=[0,0]),this._latlng=new n.maps.LatLng(t[0],t[1]),this.draw(),this},o.prototype.mount=function(t){return this.init(),this.setMap(t._original),this},o.prototype.unmount=function(){return this.setMap(null),this},o.prototype.show=function(){return this._box&&(this._box.style.display="block"),this},o.prototype.hide=function(){return this._box&&(this._box.style.display="none"),this},o}}var G="\n.popup-box[data-plain-style] {\n    z-index: 9;\n    padding: 0 0 14px 0;\n    cursor: arrow;\n    transform: translate3d(-50%, -100%, 0);\n    translate: transform ease 0;\n    animation: fade-in-data-plain-style linear 0.12s;\n    pointer-events: auto !important;\n    cursor: auto;\n}\n.popup-box[data-plain-style] .popup-content {\n    padding: 0.5rem 1rem;\n    min-height: 2rem;\n    min-width: 4rem;\n    color: #222;\n    box-shadow: 0 3px 12px rgba(0,0,0,0.38);\n    background: #fff;\n    border-radius: 4px;\n}\n.popup-box[data-plain-style] .popup-arrow{\n    position: absolute;\n    left: 50%;\n    bottom: 0;\n    height: 14px;\n    width: 28px;\n    overflow: hidden;\n    transform: translate3d(-50%, 0, 0);\n}\n.popup-box[data-plain-style] .popup-close {\n    position: absolute;\n    display: block;\n    right: 0;\n    top: 0;\n    height: 20px;\n    width: 20px;\n    border: none;\n    color: #888;\n    font-size: 20px;\n    line-height: 14px;\n    cursor: pointer;\n    background: transparent;\n    outline: none;\n}\n.popup-box[data-plain-style] .popup-close:hover {\n    color: #666;\n}\n.popup-box[data-plain-style] .popup-arrow::after {\n    display: block;\n    content: '';\n    position: absolute;\n    top: -12px;\n    left: 3px;\n    background: #fff;\n    height: 20px;\n    width: 20px;\n    border-radius: 2px;\n    transform: rotate3d(0, 0, 1, 45deg);\n    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.34);\n}\n@keyframes fade-in-data-plain-style {\n    0% {\n        opacity: 0;\n    }\n    100% {\n        opacity: 1;\n    }\n}\n\n/**\n *  BMAP */\n/**\n *  AMAP */\n.amap-marker-label {\n    border: none;\n    background: transparent;\n}\n";function V(){return function(t,n,o){var e=o.value;o.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o=e.call(this,t);return o._id=Math.random().toString(16).substr(2),o}}}return function(){function o(t){var o=this;t&&this.use(t),this.Util={formatEvent:function(t){return o.factory.Util.formatEvent.call(this,t)}},g(this.Util,L),this._v=n;var e=document.createElement("style");e.innerHTML=G,document.head.appendChild(e)}return o.prototype.use=function(t,n){if("string"==typeof t)switch(t){case"BMAP":this.factory=new B;break;case"GMAP":this.factory=new Z;break;case"AMAP":this.factory=new I}else this.factory=t;return this},o.prototype.Map=function(t){var n=t[0];return this.factory.Map(n)},o.prototype.Layer=function(t){var n=t[0];return this.factory.Layer(n)},o.prototype.Popup=function(t){var n=t[0];return this.factory.Popup(n)},o.prototype.Marker=function(t){var n=t[0],o=t[1];return this.factory.Marker(n,o)},o.prototype.Polyline=function(t){var n=t[0],o=t[1];return this.factory.Polyline(n,o)},o.prototype.Icon=function(t){var n=t[0];return this.factory.Icon(n)},o.prototype.loadMap=function(t,n,o){this.factory.load(t,n,o)},t([V()],o.prototype,"Map",null),t([V()],o.prototype,"Layer",null),t([V()],o.prototype,"Popup",null),t([V()],o.prototype,"Marker",null),t([V()],o.prototype,"Polyline",null),t([V()],o.prototype,"Icon",null),o}()});
